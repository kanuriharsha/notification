<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setup Guide - Push Notifications</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        h1 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2em;
        }

        h2 {
            color: #667eea;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
        }

        .check-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #28a745;
        }

        .check-item.warning {
            border-left-color: #ffc107;
            background: #fff3cd;
        }

        .check-item.error {
            border-left-color: #dc3545;
            background: #f8d7da;
        }

        .check-title {
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 16px;
        }

        .check-desc {
            color: #666;
            font-size: 14px;
            line-height: 1.6;
        }

        .step {
            background: #e7f3ff;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #0066cc;
        }

        .step-number {
            display: inline-block;
            background: #0066cc;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: bold;
            margin-right: 10px;
        }

        .step-title {
            font-weight: 600;
            font-size: 18px;
            margin-bottom: 10px;
        }

        .step-content {
            margin-left: 40px;
            color: #333;
            line-height: 1.8;
        }

        .btn {
            display: inline-block;
            padding: 12px 24px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        ul {
            margin-left: 20px;
            margin-top: 10px;
        }

        li {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
            font-size: 14px;
        }

        .icon {
            font-size: 48px;
            text-align: center;
            margin-bottom: 20px;
        }

        .status {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
        }

        .status.warning {
            background: #fff3cd;
            color: #856404;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <div class="icon">üì±</div>
            <h1>Setup Guide for Push Notifications</h1>
            <p class="subtitle">Follow these steps to receive notifications even when your phone is locked or Chrome is closed</p>

            <div id="systemCheck" class="status warning">‚è≥ Checking your device setup...</div>

            <h2>üìã Requirements Checklist</h2>
            
            <div class="check-item" id="check-https">
                <div class="check-title">‚úÖ HTTPS Connection</div>
                <div class="check-desc">This website must be accessed via HTTPS (secure connection)</div>
            </div>

            <div class="check-item" id="check-sw">
                <div class="check-title">‚úÖ Service Worker Support</div>
                <div class="check-desc">Your browser supports background service workers</div>
            </div>

            <div class="check-item" id="check-push">
                <div class="check-title">‚úÖ Push Notification Support</div>
                <div class="check-desc">Your browser supports push notifications</div>
            </div>

            <div class="check-item" id="check-permission">
                <div class="check-title">‚è≥ Notification Permission</div>
                <div class="check-desc">You need to grant notification permission</div>
            </div>

            <h2>üîß Platform-Specific Setup</h2>

            <div class="step">
                <div class="step-title">
                    <span class="step-number">1</span>
                    Android Setup (Chrome)
                </div>
                <div class="step-content">
                    <strong>Enable Background Data for Chrome:</strong>
                    <ul>
                        <li>Open <code>Settings</code> on your phone</li>
                        <li>Go to <code>Apps</code> or <code>Applications</code></li>
                        <li>Find and tap <code>Chrome</code></li>
                        <li>Tap <code>Mobile data & Wi-Fi</code> or <code>Data usage</code></li>
                        <li>Enable <code>Allow background data</code></li>
                        <li>Enable <code>Unrestricted data usage</code> (if available)</li>
                    </ul>
                    <br>
                    <strong>Additional Settings:</strong>
                    <ul>
                        <li>Settings ‚Üí Apps ‚Üí Chrome ‚Üí Battery ‚Üí Allow background activity</li>
                        <li>Settings ‚Üí Apps ‚Üí Chrome ‚Üí Notifications ‚Üí Allow notifications</li>
                    </ul>
                </div>
            </div>

            <div class="step">
                <div class="step-title">
                    <span class="step-number">2</span>
                    iPhone/iPad Setup (Safari/Chrome)
                </div>
                <div class="step-content">
                    <strong>For Safari (iOS 16.4+):</strong>
                    <ul>
                        <li>Add website to Home Screen first</li>
                        <li>Settings ‚Üí Notifications ‚Üí Safari ‚Üí Allow Notifications</li>
                        <li>Settings ‚Üí Safari ‚Üí Advanced ‚Üí Website Data ‚Üí Allow</li>
                    </ul>
                    <br>
                    <strong>For Chrome on iOS:</strong>
                    <ul>
                        <li>Settings ‚Üí Chrome ‚Üí Background App Refresh ‚Üí ON</li>
                        <li>Settings ‚Üí Chrome ‚Üí Notifications ‚Üí Allow Notifications</li>
                    </ul>
                </div>
            </div>

            <div class="step">
                <div class="step-title">
                    <span class="step-number">3</span>
                    Enable Notifications on This Site
                </div>
                <div class="step-content">
                    <ul>
                        <li>Go to the home page</li>
                        <li>Click the toggle to "Enable push notifications"</li>
                        <li>When prompted, click <strong>Allow</strong></li>
                        <li>You'll see a success message</li>
                    </ul>
                    <a href="/" class="btn">üîî Go to Home Page & Enable</a>
                </div>
            </div>

            <h2>‚úÖ How to Verify It's Working</h2>
            
            <div class="check-item">
                <div class="check-title">Test Notifications</div>
                <div class="check-desc">
                    <ol style="margin-left: 20px; margin-top: 10px;">
                        <li>Enable notifications on home page</li>
                        <li>Close Chrome completely (swipe away from recent apps)</li>
                        <li>Ask someone to send a test order from <code>/order</code></li>
                        <li>Your phone should vibrate + show notification with sound</li>
                    </ol>
                </div>
            </div>

            <h2>üîç Troubleshooting</h2>

            <div class="check-item warning">
                <div class="check-title">Notifications Not Coming?</div>
                <div class="check-desc">
                    <strong>Check these:</strong>
                    <ul style="margin-top: 8px;">
                        <li>Background data is enabled for Chrome</li>
                        <li>Battery optimization is OFF for Chrome</li>
                        <li>Don't use "Force Stop" on Chrome</li>
                        <li>Phone has internet connection</li>
                        <li>Notification permission is granted</li>
                        <li>Do Not Disturb mode is OFF</li>
                    </ul>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <a href="/" class="btn">üè† Back to Home</a>
                <a href="/order" class="btn" style="background: #f5576c; margin-left: 10px;">üçΩÔ∏è Place Order</a>
            </div>
        </div>
    </div>

    <script>
        // Check system capabilities
        const systemCheck = document.getElementById('systemCheck');
        const checkHttps = document.getElementById('check-https');
        const checkSw = document.getElementById('check-sw');
        const checkPush = document.getElementById('check-push');
        const checkPermission = document.getElementById('check-permission');

        function updateCheck(element, status, title, desc) {
            element.className = 'check-item ' + status;
            const icon = status === 'success' ? '‚úÖ' : status === 'error' ? '‚ùå' : '‚è≥';
            element.innerHTML = `
                <div class="check-title">${icon} ${title}</div>
                <div class="check-desc">${desc}</div>
            `;
        }

        // Check HTTPS
        if (location.protocol === 'https:' || location.hostname === 'localhost') {
            updateCheck(checkHttps, '', 'HTTPS Connection', '‚úÖ Secure connection established');
        } else {
            updateCheck(checkHttps, 'error', 'HTTPS Required', '‚ùå This site must be accessed via HTTPS for notifications to work');
        }

        // Check Service Worker support
        if ('serviceWorker' in navigator) {
            updateCheck(checkSw, '', 'Service Worker Support', '‚úÖ Your browser supports service workers');
        } else {
            updateCheck(checkSw, 'error', 'Service Worker Not Supported', '‚ùå Your browser does not support service workers');
        }

        // Check Push API support
        if ('PushManager' in window) {
            updateCheck(checkPush, '', 'Push Notification Support', '‚úÖ Your browser supports push notifications');
        } else {
            updateCheck(checkPush, 'error', 'Push Not Supported', '‚ùå Your browser does not support push notifications');
        }

        // Check notification permission
        if (Notification.permission === 'granted') {
            updateCheck(checkPermission, '', 'Notification Permission', '‚úÖ Notifications are allowed');
            systemCheck.className = 'status success';
            systemCheck.textContent = '‚úÖ Your device is ready for push notifications!';
        } else if (Notification.permission === 'denied') {
            updateCheck(checkPermission, 'error', 'Notification Permission', '‚ùå Notifications are blocked. Go to browser settings to enable them.');
            systemCheck.className = 'status error';
            systemCheck.textContent = '‚ùå Notifications are blocked. Please enable them in browser settings.';
        } else {
            updateCheck(checkPermission, 'warning', 'Notification Permission', '‚è≥ You need to grant permission. Go to home page and enable notifications.');
            systemCheck.className = 'status warning';
            systemCheck.textContent = '‚è≥ Almost ready! Please enable notifications on the home page.';
        }
    </script>
</body>
</html>
